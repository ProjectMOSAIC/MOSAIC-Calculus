<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.36">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>MOSAIC Calculus - 47&nbsp; Operations on functions</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../Manifestations/B4-splines.html" rel="next">
<link href="../manifestations-part.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script async="" src="https://hypothes.is/embed.js"></script>
</head><body class="nav-sidebar floating slimcontent"><span class="math inline" style="display: none;">
\(\newcommand{\line}{\text{line}}
\newcommand{\hump}{\text{hump}}
\newcommand{\sigmoid}{\text{sigmoid}}
\newcommand{\recip}{\text{recip}}
\newcommand{\diff}[1]{{\cal D}_#1}
\newcommand{\pnorm}{\text{pnorm}}
\newcommand{\dnorm}{\text{dnorm}}
\let\origvec\vec
\let\origmathit\mathit
\let\orighat\hat
\let\origbar\bar
\newcommand{\vec}[1]{\overset{{\rule[-1pt]{0mm}{1mm}}\rightharpoonup}{\mathbf{#1}}}
\newcommand{\bar}[1]{\overset{{\rule[-1pt]{12pt}{.5mm}}}{\mathbf{#1}}}
\newcommand{\mathit}[1]{\underset{\leftharpoondown}{\overset{{\rightharpoonup}}{\large\mathbf #1}}}
\newcommand{\hat}[1]{\widehat{\ \mathbf#1\ }}
\newcommand{\len}[1]{{\|{\mathbf #1}\|}}
\newcommand{\tvec}[1]{\overset{\uparrow}{\mathbf #1}}
\newcommand{\tmat}[1]{\overset{\leftrightarrows}{\mathbf #1}}
\newcommand{\perpendicularto}[2]{#1\!\perp\!#2}
\newcommand{\modeledby}[2]{#1\!\sim\!#2}
\newcommand{\CC}[1]{\color{#648fff}{#1}}
\newcommand{\CE}[1]{\color{#785ef0}{#1}}
\newcommand{\CA}[1]{\color{#dc267f}{#1}}
\newcommand{\CB}[1]{\color{#fe6100}{#1}}
\newcommand{\CD}[1]{\color{#ffb000}{#1}}\)
</span>


  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../mosaic-calc-style.css">




<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">47</span>&nbsp; <span class="chapter-title">Operations on functions</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="../" class="sidebar-logo-link">
      <img src="../www/Cover-1.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="../">MOSAIC Calculus</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/dtkaplan/MC2/" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">Preface</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../preliminaries-part.html" class="sidebar-item-text sidebar-link">PRELIMINARIES</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Preliminaries/01-modeling-change.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Quantity, function, space</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Preliminaries/02-notation.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Notation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Preliminaries/03-computing.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Computing with R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Preliminaries/04-graphs-and-graphics.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Visualizing functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Preliminaries/05-pattern-book-functions.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Pattern-book functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Preliminaries/06-describing-functions.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Describing functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Preliminaries/07-data-and-data-graphics.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Data and data graphics</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../modeling-part.html" class="sidebar-item-text sidebar-link">BLOCK I. Modeling</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Modeling/01-parameters.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Parameters</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Modeling/02-assembling-functions.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Assembling functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Modeling/03-functions-with-multiple-inputs.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Functions with multiple inputs</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Modeling/04-fitting-by-eye.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Fitting features</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Modeling/05-low-order-polynomials.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Low-order polynomials</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Modeling/06-operations.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Operations on functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Modeling/07-magnitudes.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Magnitude</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Modeling/08-dimensions.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Dimensions and units</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Modeling/09-modeling-cycle.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Modeling cycle [DRAFT]</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Modeling/Modeling-projects.html" class="sidebar-item-text sidebar-link">Projects</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../differentiation-part.html" class="sidebar-item-text sidebar-link">BLOCK II. Differentiation</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Differentiation/16-continuous-change.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Continuous change</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Differentiation/17-rate-of-change.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Rate of change</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Differentiation/18-evanescent-h.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Evanescent h</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Differentiation/19-computing.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Constructing derivatives</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Differentiation/20-concavity.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Concavity and curvature</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Differentiation/21-cont-and-smooth.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Continuity and smoothness</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Differentiation/22-rules.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Derivatives of assembled functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Differentiation/23-optim.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Optimization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Differentiation/24-partial.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Partial change and the gradient vector</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Differentiation/25-approximation.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Local approximations [DRAFT]</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Differentiation/26-taylor.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Polynomials</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Differentiation/Differentiation-projects.html" class="sidebar-item-text sidebar-link">Projects</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../linear-combinations-part.html" class="sidebar-item-text sidebar-link">BLOCK III. Vectors and linear combinations</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Linear-combinations/B5-Vectors.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Vectors</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Linear-combinations/B5-linear-combinations.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Linear combinations of vectors</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Linear-combinations/B5-projection.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Projection &amp; residual</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Linear-combinations/B5-target-problem.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">The target problem</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Linear-combinations/B5-stat-modeling.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Statistical modeling and R<sup>2</sup></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Linear-combinations/B5-functions.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Functions as vectors</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../accumulation-part.html" class="sidebar-item-text sidebar-link">BLOCK IV. Accumulation</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Accumulation/27-intro.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Change &amp; accumulation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Accumulation/28-visualizing.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">Totaling the little bits</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Accumulation/29-integration.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">Integration</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Accumulation/30-euler.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">Integrals step-by-step</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Accumulation/31-symbolic.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">38</span>&nbsp; <span class="chapter-title">Symbolic anti-differentiation</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../dynamics-part.html" class="sidebar-item-text sidebar-link">BLOCK V. Dynamics</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Dynamics/B6-diff-eq.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">Differential equations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Dynamics/B6-solution.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">Finding a “solution”</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Dynamics/B6-flow-on-line.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">41</span>&nbsp; <span class="chapter-title">Flows on the line</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Dynamics/B6-flow-on-plane.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">42</span>&nbsp; <span class="chapter-title">Flows on the plane</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Dynamics/B6-modeling.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">43</span>&nbsp; <span class="chapter-title">Modeling dynamics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Dynamics/B6-equilibria.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">44</span>&nbsp; <span class="chapter-title">Equilibrium and transient</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Dynamics/B6-eigen.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">45</span>&nbsp; <span class="chapter-title">Eigenvalues, eigenvectors</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Dynamics/B6-second-order.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">46</span>&nbsp; <span class="chapter-title">Force-balance equations</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../manifestations-part.html" class="sidebar-item-text sidebar-link">BLOCK VI. Manifestations</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Manifestations/B4-operations.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">47</span>&nbsp; <span class="chapter-title">Operations on functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Manifestations/B4-splines.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">48</span>&nbsp; <span class="chapter-title">Data-driven functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Manifestations/B4-optimization.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">49</span>&nbsp; <span class="chapter-title">Optimization and constraint</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Manifestations/B4-probability.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">50</span>&nbsp; <span class="chapter-title">Probability and evidence</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Manifestations/B4-future-value.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">51</span>&nbsp; <span class="chapter-title">Present and future value</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Manifestations/B4-mechanics.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">52</span>&nbsp; <span class="chapter-title">Mechanics</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true">Appendices</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../R-mosaic-setup.html" class="sidebar-item-text sidebar-link">Setting up R/mosaic</a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#task-solve" id="toc-task-solve" class="nav-link active" data-scroll-target="#task-solve"> <span class="header-section-number">47.1</span> Task: Solve</a></li>
  <li><a href="#task-argmax" id="toc-task-argmax" class="nav-link" data-scroll-target="#task-argmax"> <span class="header-section-number">47.2</span> Task: Argmax</a></li>
  <li><a href="#task-iterate" id="toc-task-iterate" class="nav-link" data-scroll-target="#task-iterate"> <span class="header-section-number">47.3</span> Task: Iterate</a></li>
  <li><a href="#software-for-the-tasks" id="toc-software-for-the-tasks" class="nav-link" data-scroll-target="#software-for-the-tasks"> <span class="header-section-number">47.4</span> Software for the tasks</a></li>
  <li><a href="#exercises" id="toc-exercises" class="nav-link" data-scroll-target="#exercises"> <span class="header-section-number">47.5</span> Exercises</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/dtkaplan/MC2/edit/main/Manifestations/B4-operations.Rmd" class="toc-action">Edit this page</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-operations" class="quarto-section-identifier d-none d-lg-block"><span class="chapter-number">47</span>&nbsp; <span class="chapter-title">Operations on functions</span></span></h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<div class="cell" data-layout-align="center" data-fig.showtext="false">

</div>
<p>Block 1 introduced the idea of <strong><em>mathematical modeling</em></strong>: creating a representation of some aspect of the world out of mathematical “stuff.” The relevant “stuff” includes the concept of a function with its inputs and output, units and dimensions of quantities, frameworks such as the basic modeling functions and ways of combining functions via linear combination, composition, and multiplication.</p>
<p>Our emphasis in calculus has been and will continue to be <strong><em>functions</em></strong>. This contrasts with high-school algebra where the emphasis was on <strong><em>equations</em></strong> and manipulations such as the movement of quantities from one side of the equal sign to another.</p>
<p>It pays to think a little about what equations mean and what information they are intended to convey. Consider an equation like <span class="math display">\[{\mathbf{\text{equation:}}}\ \ \ x^2 - 4 x + 3 = 0\]</span> which you might see in a beginning algebra text. What does this equation mean?</p>
<p>A simple equation like <span class="math inline">\(3 + 4 = 7\)</span> is a statement of fact: three plus four is indeed the same as seven. But <span class="math inline">\(x^2 - 4 x + 3 = 0\)</span> is not a fact. The equality might be true or false, depending on what <span class="math inline">\(x\)</span> happens to be. In an algebra course, the equation is intended to be an instruction to a person:</p>
<p><span class="math display">\[\text{Given}\ x^2 - 4 x + 3  = 0, \ \ \text{find x.}\]</span> or, equivalently, <span class="math display">\[\text{Solve}\ x^2 - 4 x + 3  = 0\ \ \text{for}\ x.\]</span></p>
<p>“Find <span class="math inline">\(x\)</span>” or “Solve for <span class="math inline">\(x\)</span>” direct you to determine which numerical values (if any) when substituted for <span class="math inline">\(x\)</span> in the equation will produce a true statement.</p>
<p>“Solve for <span class="math inline">\(x\)</span>” is an example of a <strong><em>mathematical task</em></strong>. We undertake such tasks to extract useful information from a mathematical object. For instance, textbook “word problems” involve two phases: i) a modeling phase where you translate a verbal description of a situation—often involving paddling canoes across a flowing river—into a matching mathematical form and ii) having constructed a suitable mathematical form, you apply some mathematical task to the form to reveal the answer you seek.</p>
<p>This chapter looks at a small list of mathematical tasks, calling them <strong><em>operations on functions</em></strong>. These operations, combined in various ways, enable you to extract relevant information from the functions you build in your models. A simple important part of this introduction is to give a <strong><em>name</em></strong> to each task. That way, confronted with a mathematical problem, you will be able to look down the short mental menu of opertions to decide which ones are applicable to your circumstance. Even better, once each operation has a name, you can tell a computer to do it for you.</p>
<p>Here are four <a name="common-tasks">common mathematical tasks</a> that you’ve already encountered in Blocks 1 through 3 of this book:</p>
<ol type="1">
<li>Given a function and specific values for the inputs, <strong><em>apply</em></strong> the function to the inputs to produce an output. This is also called <strong><em>evaluating a function</em></strong> on inputs.</li>
<li>Given a function and the name of a with-respect-to input, construct a new function that is the derivative of the given function. The name for this task is to <strong><em>differentiate the function</em></strong>.</li>
<li>Like (2), given a function and the name of a with-respect-to input, <strong><em>anti-differentiate the function</em></strong>.</li>
<li>Given a function and an interval of the domain of that function, <strong><em>accumulate</em></strong> the function on that interval. This is named to <strong><em>integrate the function</em></strong> on the interval. (You may recognize that you can perform this task by breaking it down into task (3) and then applying task (1) twice to the result. That is, <span class="math inline">\(\int_a^b f(t) dt = F(b) - F(a)\)</span>.)</li>
</ol>
<p>In this chapter, we focus on the following operations on functions that you may not yet have mastered.</p>
<ol start="5" type="1">
<li>Given a function and an output value from the function, find values for an input (or inputs) which will generate that output value. This is the <strong><em>solving</em></strong> task. A closely related task is <strong><em>zero-finding</em></strong>, which is to find an input that will cause the function to produce the output zero.</li>
<li>Given a function and an interval of the domain, find an input value that will produce an output value that is higher than would be produced for nearby inputs. As you might recognize, this is called finding an <strong><em>argmax</em></strong>. The problem of finding an <strong><em>argmin</em></strong> is the same kind of problem, and can be solved by finding the argmax of the negative of the function.</li>
<li>Given a function and an input value, <strong><em>iterate</em></strong> the function to produce a new input that will be better than the original for some purpose.</li>
</ol>
<p>These seven tasks allow you to perform the mathematical work of extracting useful information from a model. Human judgement and creativity is needed to construct the model. And judgement and experience is needed to figure out which tasks to perform and in what order. But carrying out the tasks does not require judgement, experience, or creativity. Performing the tasks requires only an algorithm and the tools to step through the algorithm. Computers are excellent for this; you just have to give them the function and whatever additional input is required (e.g.&nbsp;the name of a with-respect-to input), and then tell the computer which task it is to perform.</p>
<section id="task-solve" class="level2 page-columns page-full" data-number="47.1">
<h2 data-number="47.1" class="anchored" data-anchor-id="task-solve"><span class="header-section-number">47.1</span> Task: Solve</h2>
<p>Starting materials:</p>
<ol type="i">
<li>a function <span class="math inline">\(f(x)\)</span>,<br>
</li>
<li>a known output value <span class="math inline">\(v\)</span>, and<br>
</li>
<li>a candidate for a suitable input value <span class="math inline">\(\color{brown}{x_0}\)</span></li>
</ol>
<p><strong>Ideal result</strong> from the algorithm: A new candidate <span class="math inline">\(\color{magenta}{x^\star}\)</span> such that <span class="math inline">\(f(\color{magenta}{x^\star}) = v\)</span> or, equivalently, that <span class="math display">\[\left\|\strut f(\color{magenta}{x^\star}) - v \right\| = 0\ .\]</span></p>
<p><strong>Realistic result</strong> from the algorithm: The new candidate <span class="math inline">\(\color{magenta}{x^\star}\)</span> will be better than <span class="math inline">\(x_0\)</span>, that is,</p>
<p><span class="math display">\[ \left\|\strut f(\color{magenta}{x^\star}) - v\right\|\ \  {\mathbf &lt;}\ \  \left\|\strut f(\color{brown}{x_0}) - v\right\|\]</span></p>
<p>One algorithm for the operation involves approximating the function <span class="math inline">\(f(x)\)</span> with a straight-line function <span class="math inline">\(\widehat{f}(x) = a x + b\)</span>. For straight-line functions, the solution <span class="math inline">\(x^\star\)</span> can be found by simple arithmetic:</p>
<p><span class="math display">\[a x^\star + b - v = 0 \ \ \implies \ \ \ x^\star = \frac{b-v}{a}\]</span></p>
<p>You saw in Block 2 how to construct the straight-line approximation to a function <span class="math inline">\(f()\)</span> in a region of interest near <span class="math inline">\(x_0\)</span> by evaluating the function and its derivative at <span class="math inline">\(x_0\)</span>. In other words, <span class="math display">\[\widehat{f}(x) \equiv f(x_0) + \partial_x f(x_0) \left[\strut x - x_0 \right]\ .\]</span></p>
<p>Because <span class="math inline">\(\widehat{f}(x)\)</span> is a straight-line function, it is easy to find an input <span class="math inline">\(x_1\)</span> that will generate exactly the desired output value <span class="math inline">\(v\)</span>. In other words, to solve <span class="math inline">\(\widehat{f}(x_1) = v\)</span> for <span class="math inline">\(x_1\)</span>.</p>
<p><span class="math display">\[\begin{equation}
x_1 = x_0 + \frac{v-f(x_0)}{\partial_x f(x_0)}
\end{equation}\]</span></p>
<p>Although <span class="math inline">\(x_1\)</span> is an exact solution to the approximate problem, all we can hope is that for nonlinear <span class="math inline">\(f(x)\)</span>, <span class="math inline">\(x_1\)</span> will be an approximate solution to the actual problem. In particular, we want <span class="math inline">\(x_1\)</span> to be a better guess than <span class="math inline">\(x_0\)</span>:</p>
<p><span class="math display">\[\|f(x_1) - v\| \underbrace{\ \ &lt;\ \ }_\text{We hope!} \|f(x_0) - v\|\]</span></p>
<p>This (hopefully) improved solution <span class="math inline">\(x_1\)</span> can become the starting guess for a new round of improvement based on the straight-line approximation to <span class="math inline">\(f(x)\)</span> around <span class="math inline">\(x_1\)</span>. The refinement of <span class="math inline">\(x_1\)</span> will be calculated as <span class="math display">\[\begin{equation}
x_2 = x_1 + \frac{v-f(x_1)}{\partial_x f(x_1)}
\end{equation}\]</span></p>
<p>Each round of improvement—that is, “iteration”—calculates a new value <span class="math inline">\(x_{i+1}\)</span> from the previous <span class="math inline">\(x_i\)</span>. The improvement can be encapsulated as a function, which we will call <code>solve_step()</code>:</p>
<p><span class="math display">\[\text{solve-step}(z) \equiv z + \frac{v-f(z)}{\partial_x f(z)}\ .\]</span></p>
<p>This particular form of solve_step() is called a <strong><em>Newton step</em></strong>. The idea is to take successive steps, each refining the previous approximation, to get closer and closer (hopefully!) to the actual answer <span class="math inline">\(x^\star\)</span>:</p>
<p><span class="math display">\[x_1 = \text{solve-step}(x_0)\\
x_2 = \text{solve-step}(x_1)\\
x_3 = \text{solve-step}(x_2)\\
\vdots\\
x_{i+1} = \text{solve-step}(x_{i})\\\ \\
\text{until eventually}\ \|f(x_{i+1}) - v\|\ \text{is practically zero.}\]</span></p>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="cell-output-display page-columns page-full">
<div id="fig-newton-step" class="quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="B4-operations_files/figure-html/fig-newton-step-1.png" class="img-fluid figure-img" style="width:90.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Figure 47.1: A Newton-step calculation seen graphically. The brown function is approximated as a straight-line function at the initial point <span class="math inline">\(x_0\)</span>. The resulting <span class="math inline">\(x_1\)</span> is where that straight line crosses the value <span class="math inline">\(v\)</span> on the output scale. Here, <span class="math inline">\(x_1\)</span> is a little to the left of the actual place where <span class="math inline">\(f()\)</span> crosses <span class="math inline">\(v\)</span>. The Newton step produced an improved guess, since <span class="math inline">\(\|x_1 - x^\star\|\)</span> is smaller than <span class="math inline">\(\| x_0 - x^\star\|\)</span>.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="example">
<p>Construct the Newton-step function for finding zeros of the function <span class="math display">\[f(x) \equiv x^2 - x\ \]</span></p>
<p>Since <span class="math inline">\(\partial_x f(x) = 2 x - 1\)</span>, the custom-built Newton-step function will be:</p>
<p><span class="math display">\[\text{solve-step}(z) = z - \frac{z^2 - z - 4}{2 z - 1}\]</span></p>
<div class="cell" data-layout-align="center" data-fig.showtext="false">

</div>
<p>The algorithm requires a starting guess. We will use <span class="math inline">\(x_0 = 2\)</span>. After each application of <code>solve_step()</code>, we will print out the refined value as well as the function output at that refined value.</p>
<div class="cell" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>x0 <span class="ot">&lt;-</span> <span class="dv">2</span> </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="fu">solve_step</span>(x0)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(x1)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 4.444444</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>x2 <span class="ot">&lt;-</span> <span class="fu">solve_step</span>(x1)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(x2)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 4.010519</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>x3 <span class="ot">&lt;-</span> <span class="fu">solve_step</span>(x2)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(x3)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 4.000006</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The output <span class="math inline">\(f(x_3)\)</span> is practically the desired <span class="math inline">\(v=4\)</span> so we have our result: <span class="math inline">\(x^\star = 2.56155\)</span>!</p>
<p>After the first Newton step, producing <span class="math inline">\(x_1 = 2.666666\)</span>, the function output and <span class="math inline">\(f(x_1) = 4.44444\)</span> was not sufficiently close to the desired output for us to take <span class="math inline">\(x_1\)</span> as the solution. You can think of the problem like the task of digging a well. You need to start with the first shovelful. Then take another and another and … until you have your well.</p>
</div>
<p>Newton’s method involves creating a custom <code>solve_step()</code> function for each new problem. The process is simple enough that we can create such functions automatically:</p>
<div class="cell" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>make_solve_step_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(tilde, v) {</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  f <span class="ot">&lt;-</span> <span class="fu">makeFun</span>(tilde)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> <span class="fu">D</span>(tilde)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  custom_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(z) {z <span class="sc">+</span> (v<span class="sc">-</span><span class="fu">f</span>(z))<span class="sc">/</span><span class="fu">df</span>(z)}</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(custom_fun)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s test it out with this function:</p>
<div class="cell" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">makeFun</span>(x<span class="sc">^</span><span class="dv">2</span> <span class="sc">-</span> x <span class="sc">~</span> x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Construct the take-a-step function:</p>
<div class="cell" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>take_step <span class="ot">&lt;-</span> <span class="fu">make_solve_step_fun</span>(<span class="fu">f</span>(x) <span class="sc">~</span> x, <span class="at">v=</span><span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Take three steps starting at <span class="math inline">\(x_0 = 3\)</span>:</p>
<div class="cell" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>x0 <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="fu">take_step</span>(x0)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>x2 <span class="ot">&lt;-</span> <span class="fu">take_step</span>(x1)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>x3 <span class="ot">&lt;-</span> <span class="fu">take_step</span>(x2)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(x3)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The Newton-step process is not guaranteed to work. By exploring cases where it fails, <strong><em>computational mathematicians</em></strong><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> have developed strategies for increasing the range of situations for which it works. Some of these strategies are incorporated in the R/mosaic function <code>Zeros()</code>.</p>
<div class="rmosaic">
<p><code>Zeros()</code> takes two arguments: a function and a domain. The function is specified, as with other R/mosaic operators such as <code>D()</code>, <code>slice_plot()</code>, etc., as a tilde expression. <code>Zeros()</code> searches the domain for an input which makes the value of the function zero. If, instead, you want to find an input that makes the function value some other value, say <span class="math inline">\(f(x^\star) = v\)</span>, you construct an intermediate expression <code>f(x) - v ~ x</code>. Finding the zero of the intermediate function corresponds to finding <span class="math inline">\(f(x^star) = v\)</span>.</p>
<p>Sometimes there will be multiple zeros on the specified domain. To handle such situations, <code>Zeros()</code> returns a data frame with two columns. The first gives input values that correspond to an output near zero. The second column, named <code>.output.</code> calculates the output (and will be near zero). We will illustrate by solving <span class="math inline">\(x^3 = 6\)</span> for <span class="math inline">\(x\)</span>.</p>
<div class="cell" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Zeros</span>(x<span class="sc">^</span><span class="dv">3</span> <span class="sc">-</span> <span class="dv">6</span> <span class="sc">~</span> x, <span class="fu">bounds</span>(<span class="at">x=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">6</span>)))</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 1 × 2</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="do">##       x    .output.</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;dbl&gt;       &lt;dbl&gt;</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 1  1.82 0.000000203</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="task-argmax" class="level2" data-number="47.2">
<h2 data-number="47.2" class="anchored" data-anchor-id="task-argmax"><span class="header-section-number">47.2</span> Task: Argmax</h2>
<p>The task of finding the input value that corresponds to a local maximum is called <strong><em>argmax finding</em></strong>. We don’t need to know the value of the local maximum to solve this problem. Instead, we designate a locale by specifying an initial guess <span class="math inline">\(x_0\)</span> for the argmax. For argmax finding of an objective function <span class="math inline">\(f(x)\)</span>, we seek a <span class="math inline">\(x^\star\)</span> such that <span class="math inline">\(f(x^\star) &gt; f(x_0)\)</span>.</p>
<p>To accomplish this, we will approximate <span class="math inline">\(f(x)\)</span> with a low-order polynomial, as we so often do. We will call the approximation <span class="math inline">\(\widehat{f(x)}\)</span>. In the solving task, the approximation was with a first-order polynomial. But first-order polynomials—that is, straight-line functions—don’t have a local argmax. We need to use a second-order polynomial. Easy enough: construct the second-order <strong><em>Taylor polynomial</em></strong> around <span class="math inline">\(x_0\)</span>:</p>
<p><span class="math display">\[\widehat{f}(x) \equiv f(x_0) + f'(x_0) \left[x - x_0\right] + \frac{1}{2} f''(x_0) \left[x-x_0\right]^2\]</span></p>
<p>Remember that <span class="math inline">\(f(x_0)\)</span>, <span class="math inline">\(f'(x_0)\)</span> and <span class="math inline">\(f''(x_0)\)</span> are all fixed quantities; the output of the functions for the specific input <span class="math inline">\(x_0\)</span>.</p>
To find the argmax of <span class="math inline">\(\widehat{f}(x)\)</span>, differentiate it with respect to <span class="math inline">\(x\)</span> and find the zero of the derivative: $$<em>x = f’(x_0) </em>{{
<p>}1} +</p>
<p> f’’(x_0) _{2 } = 0</p>
<p>$$</p>
<p>This gives <span class="math display">\[f'(x_0) + f''(x_0) \left[x - x_0\right] = 0\ .\]</span> We will solve this equation for <span class="math inline">\(x\)</span> and, having in mind the iterative process of the previous section, call the result <span class="math inline">\(x_1\)</span></p>
<p><span class="math display">\[x_1 = x_0 - \frac{f'(x_0)}{f''(x_0)}\ .\]</span></p>
<p>In other words, our new guess <span class="math inline">\(x_1\)</span> will be a step away from the old guess <span class="math inline">\(x_0\)</span>, with the step being <span class="math inline">\(-f'(x_0) / f''(x_0)\)</span>. This also is called a Newton step. What’s different from the Newton step of the previous section is that the function whose zeros are being sought is not <span class="math inline">\(f(x)\)</span> but <span class="math inline">\(f'(x)\)</span>.</p>
<div class="rmosaic">
<p>Use the R/mosaic <code>argM()</code> function to find argmaxes and argmins. Like other R/mosaic calculus functions, the first argument is a tilde expression defining the objective function. The second argument is the domain to search.</p>
<p>To illustrate, the following code creates a randomly shaped function (displayed in <span class="quarto-unresolved-ref">?fig-argm-ex1</span>) and calls <code>argM()</code> to generate the argmaxes and argmins.</p>
<div class="cell" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">rfun</span>(<span class="sc">~</span> x, <span class="dv">3215</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center" data-fig.showtext="false">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="B4-operations_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" style="width:50.0%"></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">argM</span>(<span class="fu">f</span>(x) <span class="sc">~</span> x, <span class="fu">bounds</span>(<span class="at">x =</span> <span class="sc">-</span><span class="dv">5</span><span class="sc">:</span><span class="dv">5</span>))</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 2 × 3</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="do">##       x .output. concavity</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 1  1.03   -26.5          1</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 -2.95     3.80        -1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Notice that <code>argM()</code> identified both a local maximum and a local minimum, that is, one argmax and one argmin. Visually, it is easy to tell which one is which. In terms of the data frame returned by <code>argM()</code>, the sign of the concavity does the identification for you: positive concavity points to an argmin, negative concavity to an argmax. The name <code>argM()</code> refers to this versatility of finding both argmins and argmaxes.</p>
</div>
</section>
<section id="task-iterate" class="level2" data-number="47.3">
<h2 data-number="47.3" class="anchored" data-anchor-id="task-iterate"><span class="header-section-number">47.3</span> Task: Iterate</h2>
<p>In everyday language, to <strong><em>iterate</em></strong> means simply to repeat: to do something over and over again. In mathematics and in computing, “iterate” has a more specific meaning: to repeatedly perform an operation, each time taking the output from the previous round as the input to the current round.</p>
<p>For our purposes, it suffices to define iteration in terms of the use of a function <span class="math inline">\(g(x)\)</span>. The function must be such that the output of the function can be used as an input to the function; the output must be the same kind of thing as the input. The iteration starts with a specific value for the input. We will call this value <span class="math inline">\(x_0\)</span>. Iteration then means simply to compose the function with itself starting with <span class="math inline">\(x_0\)</span> as the initial input. Here, for instance, is a four-step iteration:</p>
<p><span class="math display">\[g(g(g(g(x_0))))\]</span></p>
<p>Or, you might choose to iterate for ten steps:</p>
<p><span class="math display">\[g(g(g(g(g(g(g(g(g(g(x_0))))))))))\]</span></p>
<p>However many iteration steps you take, the output from the final step is what you work with.</p>
<p>Iteration is the mathematical engine behind many function operations. You’ve already seen it at work for the “solve” task and the “argmax” task.</p>
<div class="rmosaic">
<p>The R/mosaic function <code>Iterate()</code> provides a very simple way to see the results of iteration. Typically when iteration is used as part of a function operation, the software has been written specifically for that task and includes logic about when to stop or start over or handle a variety of troublesome cases. The function <code>Iterate()</code> is provided in R/mosaic just for demonstration purposes.</p>
<p><code>Iterate()</code> takes arguments specifying the function to be iterated (as a tilde expression), the starting <span class="math inline">\(x_0\)</span>, and the number <span class="math inline">\(n\)</span> of steps to take. To illustrate, we will iterate a famous function called the <strong><em>logistic map</em></strong>: <span class="math inline">\(f(x) \equiv \mu x (1-x)\)</span>. Depending on the value of the parameter <span class="math inline">\(\mu\)</span>, the iterates can show different patterns.</p>
<p>Eventually reaching a <strong><em>fixed point</em></strong>: ::: {.cell layout-align=“center” fig.showtext=‘false’}</p>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Iterate</span>(<span class="dv">2</span><span class="sc">*</span>x<span class="sc">*</span>(<span class="dv">1</span><span class="sc">-</span>x) <span class="sc">~</span> x, <span class="at">x0=</span><span class="fl">0.3</span>, <span class="at">n=</span><span class="dv">10</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="do">##     n         x</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="do">## 1   0 0.3000000</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="do">## 2   1 0.4200000</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 3   2 0.4872000</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 4   3 0.4996723</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 5   4 0.4999998</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 6   5 0.5000000</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 7   6 0.5000000</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 8   7 0.5000000</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 9   8 0.5000000</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 10  9 0.5000000</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 11 10 0.5000000</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Eventually reaching a periodic oscillation: ::: {.cell layout-align=“center” fig.showtext=‘false’}</p>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Iterate</span>(<span class="fl">3.2</span><span class="sc">*</span>x<span class="sc">*</span>(<span class="dv">1</span><span class="sc">-</span>x) <span class="sc">~</span> x, <span class="at">x0=</span><span class="fl">0.3</span>, <span class="at">n=</span><span class="dv">50</span>) <span class="sc">|&gt;</span> <span class="fu">tail</span>()</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="do">##     n         x</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="do">## 46 45 0.5130445</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="do">## 47 46 0.7994555</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 48 47 0.5130445</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 49 48 0.7994555</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 50 49 0.5130445</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 51 50 0.7994555</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>:::</p>
<p>A never-ending, random-seeming fluctuation, called mathematical <strong><em>chaos</em></strong>:</p>
<div class="cell" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Iterate</span>(<span class="fl">4.0</span><span class="sc">*</span>x<span class="sc">*</span>(<span class="dv">1</span><span class="sc">-</span>x) <span class="sc">~</span> x, <span class="at">x0=</span><span class="fl">0.3</span>, <span class="at">n=</span><span class="dv">5000</span>) <span class="sc">|&gt;</span> <span class="fu">tail</span>()</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="do">##         n          x</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="do">## 4996 4995 0.56824790</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="do">## 4997 4996 0.98136889</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 4998 4997 0.07313595</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 4999 4998 0.27114833</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 5000 4999 0.79050766</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 5001 5000 0.66242119</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>:::</p>
</section>
<section id="software-for-the-tasks" class="level2" data-number="47.4">
<h2 data-number="47.4" class="anchored" data-anchor-id="software-for-the-tasks"><span class="header-section-number">47.4</span> Software for the tasks</h2>
<p>Evaluation of a function—<a href="#common-tasks">number one in the list at the head of this chapter</a>—is so central to the use of computer languages generally that every language provides a direct means for doing so. In R, as you know, the evaluation syntax involves following the name of the functions by a pair of parentheses, placing in those parenthesis the values for the various arguments to the function. Example: <code>log(5)</code></p>
<p>The other six operations on functions listed above, there is one (or sometimes more) specific R/mosaic functions. Every one of them takes, as a first argument, a <strong><em>tilde expression</em></strong> describing the function on which the operation is to be formed; on the left side is a formula for the function (which can be in terms of other, previously defined functions), on the right side is the with-respect-to input.</p>
<ol start="2" type="1">
<li>Differentiate: <code>D()</code>. Returns a <strong><em>function</em></strong>.</li>
<li>Anti-differentiate: <code>antiD()</code>. Returns a <strong><em>function</em></strong>.</li>
<li>Integrate: <code>Integrate()</code>. Returns a <strong><em>number</em></strong>.</li>
<li>Solve: <code>Zeros()</code>. Returns a <strong><em>data frame</em></strong> with one row for each solution found.</li>
<li>Argmax: <code>argM()</code> Finds one argmax and one argmin in the domain. <code>local_argM()</code> looks for all the local argmaxes and argmins. Returns a <strong><em>data frame</em></strong> with one row for each argmax or argmin found.</li>
<li>Iterate: <code>Iterate()</code> Returns a data frame with the value of the initial input and the output after each iteration.</li>
</ol>
<p>Each of operations 4-6 involves the specification of a <strong><em>domain</em></strong>. For <code>Integrate()</code>, this is, naturally, the domain of integration: the upper and lower bounds of the integral</p>
<p>For <code>Zeros()</code> and <code>argM()</code> the domain specifies where to search for the answer. <code>Iterate()</code> is slightly different. After the tilde expression comes an initial value <span class="math inline">\(x_0\)</span> and then <code>n=</code> which you use to set the number of times to iterate.</p>
</section>
<section id="exercises" class="level2" data-number="47.5">
<h2 data-number="47.5" class="anchored" data-anchor-id="exercises"><span class="header-section-number">47.5</span> Exercises</h2>
<section id="exercise-47.01" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="exercise-47.01">Exercise 47.01</h4>
<p>Create a function, which iterated sufficiently from a starting guess, will implement Newton’s method to calculate <span class="math inline">\(\sqrt{10}\)</span>.</p>
<div class="cell" data-layout-align="center" data-fig.showtext="false">
<div class="cell-output-display">
<p><strong>Part A</strong> Which of these functions is appropriate to use in Newton’s method for calculating <span class="math inline">\(\sqrt{10}\)</span>?</p>
<ol type="a">
<li><span class="math inline">\(f(x) \equiv x^2 - 10\)</span></li>
<li><span class="math inline">\(f(x) \equiv x - \sqrt{10}\)</span></li>
<li><span class="math inline">\(f(x) \equiv (x - 10)^2\)</span></li>
</ol>
</div>
</div>
<p>Now you will translate <span class="math inline">\(f(x)\)</span> into a function, when iterated from some starting guess <span class="math inline">\(x_0\)</span>, will tend toward a zero of <span class="math inline">\(f(x)\)</span>. The function will have the form <span class="math display">\[N(x) \equiv x - \frac{f(x)}{f'(x)}\ .\]</span></p>
<div class="cell" data-layout-align="center" data-fig.showtext="false">
<div class="cell-output-display">
<p><strong>Part B</strong> What is the function <span class="math inline">\(f'(x)\)</span> for the <span class="math inline">\(\sqrt{10}\)</span> problem?</p>
<ol type="a">
<li><span class="math inline">\(2x - 10\)</span></li>
<li><span class="math inline">\(2x\)</span></li>
<li><span class="math inline">\(\frac{1}{3} x^3 + 10 x + C\)</span></li>
<li><span class="math inline">\(x\)</span></li>
</ol>
</div>
</div>
<div class="cell" data-layout-align="center" data-fig.showtext="false">
<div class="cell-output-display">
<p><strong>Part C</strong> Which of these is the correct form for the Newtons-method iterator <span class="math inline">\(N(x) \equiv x - \frac{f(x)}{f'(x)}\)</span>?</p>
<ol type="a">
<li><span class="math inline">\(N(x) \equiv x - \frac{x^2 - 10}{2 x}\)</span></li>
<li><span class="math inline">\(N(x) \equiv x + \frac{x^2 - 10}{2 x}\)</span></li>
<li><span class="math inline">\(N(x) \equiv x + \frac{2x}{x^2 - 10}\)</span></li>
<li><span class="math inline">\(N(x) \equiv x - \frac{2x}{x^2 - 10}\)</span></li>
</ol>
</div>
</div>
<p>In a <a href="https://maa-statprep.shinyapps.io/CalcZ-Sandbox/">SANDBOX</a>, implement <span class="math inline">\(N(x)\)</span>.</p>
<div class="cell" data-layout-align="center" data-fig.showtext="false">
<div class="cell-output-display">
<p><strong>Part D</strong> Using <span class="math inline">\(N()\)</span> as the dynamics and starting with <span class="math inline">\(x_0 = 1\)</span>, what is <span class="math inline">\(x_5\)</span>?</p>
<p>5.5 3.659091 3.141593 3.196005 3.162456 3.162354 3.162278</p>
</div>
</div>
<div class="cell" data-layout-align="center" data-fig.showtext="false">
<div class="cell-output-display">
<p><strong>Part E</strong> Modify <code>N()</code> to find <span class="math inline">\(\sqrt{20}\)</span>. Starting at <span class="math inline">\(x_0=1\)</span>, how many times do you have to apply your new <code>N()</code> to get an answer right to within 1% of the true number?</p>
<ol type="a">
<li>After 2 steps we get 4.202</li>
<li>After 3 steps we get 4.713.</li>
<li>After 3 steps we get 4.472.</li>
<li>After 4 steps we get 4.472.</li>
<li>After 4 steps we get 4.478.</li>
</ol>
</div>
</div>
<div class="cell" data-layout-align="center" data-fig.showtext="false">
<div class="cell-output-display">
<p><strong>Part F</strong> Modify your <code>N()</code> once again to find <span class="math inline">\(\sqrt[3]{10}\)</span>. (That is, the cube-root of 10.) Starting at <span class="math inline">\(x_0 = 1\)</span>, take 3 Newton steps. What is <span class="math inline">\(x_3\)</span>?</p>
<p>2.154 2.320 2.875 2.912</p>
</div>
</div>
</section>
<section id="exercise-47.03" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="exercise-47.03">Exercise 47.03</h4>
<ol type="A">
<li>Write a Newton-step <code>better()</code> function to solve for <span class="math inline">\(x\)</span> in the equation <span class="math inline">\(\sin(x) = \cos(x)\)</span>. Start with the guess <span class="math inline">\(x_0 = 0\)</span> and iterate <code>better()</code> enough times to get <span class="math inline">\(\| x_i - x^\star\| &lt; 0.001\)</span>.</li>
</ol>
<p>To help, we will give the hint that <span class="math inline">\(x^\star \approx 0.785\)</span>.</p>
<ol start="2" type="A">
<li>Suppose we hadn’t told you the answer <span class="math inline">\(x^\star\)</span>. How could you know, just from your iterations of <code>better()</code>, that you are very close to the true answer.</li>
</ol>
</section>
<section id="exercise-47.04" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="exercise-47.04">Exercise 47.04</h4>
<p>We introduced Newton’s method as a technique for finding zeros of functions. For instance, for finding zeros of <span class="math inline">\(g(x)\)</span>, you would apply the function better() iteratively to an initial guess <span class="math inline">\(x_0\)</span>.</p>
<p><span class="math inline">\(\text{better}(x) \equiv x - \frac{g(x)}{\partial_x g(x)}\)</span></p>
<p>A. Suppose your goal is not to find a zero of <span class="math inline">\(g(x)\)</span> but instead to find an <strong>argmax</strong>. One way to do this is to find the zeros of <span class="math inline">\(\partial_x g(x)\)</span>. Write down the Newton-step suitable for the argmax problem.</p>
<p>B. Imagine that <span class="math inline">\(g(x)\)</span> has an output of miles-per-gallons and an input speed in miles-per-hour. What will be the dimension of the Newton step for the optimization problem?</p>
<p>C. Taking into account the dimension of the input <span class="math inline">\(x\)</span> and of the output <span class="math inline">\(f(x)\)</span>, what is the dimension of the step <span class="math inline">\(-f'(x_0) / f''(x_0)\)</span>. Explain why this makes sense in terms of what a step needs to be.</p>
</section>
<section id="exercise-47.05" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="exercise-47.05">Exercise 47.05</h4>
<div class="cell" data-layout-align="center" data-fig.showtext="false">
<div class="cell-output-display">
<p><strong>Part A</strong> Which of the following R/mosaic functions takes an initial condition as one of the inputs?</p>
<p><code>antiD()</code> <code>D()</code> <code>Iterate()</code></p>
</div>
</div>
<div class="cell" data-layout-align="center" data-fig.showtext="false">
<div class="cell-output-display">
<p><strong>Part B</strong> Which of the following R/mosaic functions requires that you specify a domain as one of the inputs to the function?</p>
<p><code>antiD()</code> <code>D()</code> <code>Iterate()</code> <code>Solve()</code></p>
</div>
</div>
<div class="cell" data-layout-align="center" data-fig.showtext="false">
<div class="cell-output-display">
<p><strong>Part C</strong> The R/mosaic functions <code>Solve()</code> and <code>argM()</code> return what kind of computer object?</p>
<p>a number a function a graph a data frame</p>
</div>
</div>
</section>
<section id="exercise-47.06" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="exercise-47.06">Exercise 47.06</h4>
<p>A simple robot arm to move things in the <span class="math inline">\((x,y)\)</span> plane consists of two links, the first connected to the base of the robot and the second to the free end of the first link, as in the diagram. At the end of the second link is a tool, such as a drill. Such a robot would be used to drill a series of precisely positioned whole in a metal plate.</p>
<p>Each link is moved by a digitally-controlled motor. To position the robot, commands are sent to the two motors to set their respective angles. For instance, in the diagram the motor-1 angle, <span class="math inline">\(\theta_1\)</span> is set to 45 degrees, while the motor-2 angle <span class="math inline">\(\theta_2\)</span> is set to -60 degrees.</p>
<p>The problem faced by the robot designer is to allow the user to input a series of <span class="math inline">\((x,y)\)</span> coordinates (where the holes are to be drilled) and have the robot controller calculate the resulting angles.</p>
<p>For simplicity, assume that the link lengths are both <span class="math inline">\(L = 1\)</span>, but generalizing this to two different link lengths would not be difficult.</p>
<p>At this point, play with the problem a bit. Mark a point on your desk or paper. This will be the location of the base of the robot. Take two pencils, let’s call them “yellow” and “green,” putting the eraser of yellow at the base location and the eraser of green at the tip of yellow. Now, pick another point on your desk or paper to be the target for the robot arm. (This must be closer to the base than the sum of lengths of the two pencils.) Change the orientation of the pencils, keeping yellow attached to the base and green attached to the tip of yellow. Your job is to find an orientation that will place the tip of green on the target. Try different target points until you feel comfortable that you understand how to solve the problem.</p>
<p>Now to create a mathematical model of the situation so that we can automate the solution. The purpose of this model is to find <span class="math inline">\(\theta_1\)</span> and <span class="math inline">\(\theta_2\)</span> given the <span class="math inline">\((x, y)\)</span> position of the target.</p>
<p>From your experience using pencils as the model of the robot, you may have noticed that the location of the “elbow” of the robot arm is key to the solution. Find the right position for the elbow and the angles can be calculated from trigonometry.</p>
<p>Note that the position of the elbow, which we will denote with coordinates <span class="math inline">\((u, v)\)</span> is determined solely by <span class="math inline">\(L\)</span> and <span class="math inline">\(\theta_1\)</span>.</p>
<ol type="1">
<li><p>Write down a formula for the <span class="math inline">\(u\)</span> and for the <span class="math inline">\(v\)</span> position of the elbow as a function of <span class="math inline">\(\theta_1\)</span> (taking the base as the origin). Hint: sine and cosine functions are relevant.</p></li>
<li><p>Implement the formulas from (1) into two functions, one called <code>elbow_u(theta1)</code> and the other <code>elbow_v(theta1)</code>.</p></li>
<li><p>Write another function, <code>elbow_to_target_dist(theta1, x, y)</code> that will use <code>elbow_u()</code> and <code>elbow_v()</code> to calculate the distance from the elbow to the target point <span class="math inline">\((x, y)\)</span>. (The distance will be <span class="math inline">\(\sqrt{\strut (x - u)^2 + (y-v)^2}\)</span>.)</p></li>
<li><p>Write yet another function, <code>dist_at_theta(theta1, x, y)</code> that, given an angle theta, will return the distance from the elbow to the target. The logic is to use <code>elbow_u()</code> and <code>elbow_v()</code> to find the location of the elbow <span class="math inline">\(u\)</span> and <span class="math inline">\(v\)</span> and then give these as the argments to <code>elbow_to_target_dist()</code>.</p></li>
<li><p>The next phase of the solution is to use <code>elbow_to_target_dist(theta1, x, y)</code> to find a value of <code>theta1</code> that will make the distance equal to the length <span class="math inline">\(L\)</span> of link2. When you have found this <code>theta1</code>, you will know the position of the elbow that is consistent with reaching the target from the base with the two links.</p>
<ol type="i">
<li>Pick a target location. This can be anything within distance <span class="math inline">\(2L\)</span> from the base. We will call the coordinates of your target <code>target_x</code> and <code>target_y</code>.</li>
<li>Plot out <code>elbow_to_target_dist(theta1, x=target_x, y=target_y)</code> as a function of <code>theta1</code> over the domain <span class="math inline">\(-\pi \leq \theta_1 \leq \pi\)</span>.</li>
<li>Locate a value of <span class="math inline">\(\theta_1\)</span> where the output of the function is <span class="math inline">\(L\)</span>.</li>
</ol></li>
<li><p>Write another function, <code>elbow_theta1(x, y)</code> that takes the <span class="math inline">\((x, y)\)</span> position as input and produces as output suitable value(s) of <span class="math inline">\(\theta_1\)</span>. To do this within the <code>elbow_theta1(x, y)</code> function, use <code>Zeros(dist_at_theta(theta1) - L, bounds(theta1=-pi:pi))</code>.</p></li>
</ol>
<div class="cell" data-layout-align="center" data-fig.showtext="false">

</div>


</section>
</section>
<section class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1" role="doc-endnote"><p>A traditional name for such a person is “numerical analyst.”<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../manifestations-part.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">BLOCK VI. Manifestations</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../Manifestations/B4-splines.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">48</span>&nbsp; <span class="chapter-title">Data-driven functions</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>